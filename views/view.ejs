<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    <style>
        h1 {
            text-align:center;
            margin:30px;
        }
        body {
            margin:30px;
        }
        table{
            text-align:center;
        }
    </style>

    <title>Server side Javascript</title>
</head>
<body>
    <h1 ><a href="/topic">Server Side Javascript</a></h1>      
    <div class="container">        
        <table class="table table-dark table-striped">
          <thead>
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Description</th>
              <th>Author</th>
              <th>Edit</th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody>
                <% for(var i = 0; i < topics.length; i++){ %>
                    <tr>
                        <td><%= topics[i].id%></td>               
                        <td><a href="/topic/<%= topics[i].id %>"><%= topics[i].title %></td>
                        <td><%= topics[i].description %></td>
                        <td><%= topics[i].author %></td>
                        <td> 
                            <a href="/topic/edit/<%= topics[i].id %>"><button type="button" class="btn btn-outline-success">수정</button></a>
                        </td>
                        <td>
                            <a href="/topic/<%= topics[i].id%>/delete" onclick="return deleteConfirm()"><button type="button"  class="btn btn-outline-danger">삭제</button></a>
                        </td>
                    </tr>
                <% } %>
        </table>
      </div>
        <% if(topic){ %>
            <h1><%= topic.title %></h1>
            <p><%= topic.description %></p>
            <p>by <%= topic.author %></p>
        <% } else { %>
            <h1>Welcome</h1>
            This is Server Side JavaScript Tutorial<br><br>
            <a href="/topic/add"><button type="button" class="btn btn-outline-primary">추가</button></a>
        <% } %>


        <script>
            function deleteConfirm(){
                return confirm("정말 삭제하시겠습니까?")
            }
        </script>
</body>
</html>